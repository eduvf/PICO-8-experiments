pico-8 cartridge // http://www.pico-8.com
version 36
__lua__
function _init()
  colors = { 1, 3, 7, 8, 9 }
  generate_wall()
end

function _update()
  if btnp(4) then
    generate_wall()
  end
end

function generate_wall()
  cls(2)
  rectfill(8, 8, 8*15-1, 8*15-1, rnd(colors))

  for y = 1, 14 do
    for x = 1, 14 do
      if rnd() < 0.7 then
        rectfill(x*8, y*8, x*8+7, y*8+7, rnd(colors))
        if rnd() < 0.8 then
          pal(15, rnd(colors))
          spr(rnd{1, 2}, x*8, y*8, 1, 1, rnd{true, false}, rnd{true, false})
        end
      end
    end
  end

  for i = 1, flr(rnd(32)) do
    local x = flr(rnd(13)) + 1
    local y = flr(rnd(13)) + 1
    local fg = rnd(colors)
    local bg = rnd(colors)

    rectfill(x*8, y*8, x*8+15, y*8+15, bg)
    pal(15, fg)
    if rnd() < 0.5 then
      spr(1, x*8,   y*8,   1, 1, false, false)
      spr(1, x*8+8, y*8,   1, 1, true,  false)
      spr(1, x*8,   y*8+8, 1, 1, false, true)
      spr(1, x*8+8, y*8+8, 1, 1, true,  true)
    else
      spr(2, x*8,   y*8,   1, 1, false, false)
      spr(2, x*8+8, y*8,   1, 1, true,  false)
      spr(2, x*8,   y*8+8, 1, 1, false, true)
      spr(2, x*8+8, y*8+8, 1, 1, true,  true)
    end
  end
end
__gfx__
000000000000000f000000ff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000ff0000ffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000000fff000fffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770000000ffff00ffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000fffff0fffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000ffffff0fffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000fffffffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ffffffffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
