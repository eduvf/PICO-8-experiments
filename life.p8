pico-8 cartridge // http://www.pico-8.com
version 36
__lua__
prev = {}
next = {}
total = 0

function _init()
  for p = 0, 16384-1 do
    prev[p] = rnd() > 0.9
  end
end

function _draw()
  total = 0
  for p = 0, 16384-1 do
    local alive = 0

    if prev[(p-128-1)%16384] then alive += 1 end
    if prev[(p-128)  %16384] then alive += 1 end
    if prev[(p-128+1)%16384] then alive += 1 end
    if prev[(p-1)    %16384] then alive += 1 end
    if prev[(p+1)    %16384] then alive += 1 end
    if prev[(p+128-1)%16384] then alive += 1 end
    if prev[(p+128)  %16384] then alive += 1 end
    if prev[(p+128+1)%16384] then alive += 1 end

    if prev[p] then
      next[p] = (alive == 2) or (alive == 3)
      pset(p % 128, flr(p / 128), 11)
      total += 1
    else
      next[p] = alive == 3
      pset(p % 128, flr(p / 128), 0)
    end
  end
  rectfill(0, 0, 128, 6, 0)
  print("alive cells: "..total, 0, 0, 10)

  for p = 0, 16384-1 do
    prev[p] = next[p]
  end
end

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
